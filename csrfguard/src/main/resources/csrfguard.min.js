(()=>{var e=e||{};!0!==e&&function(){function t(e,t,n){e.addEventListener?(e.addEventListener(t,n,!1),s.add(e,t,n)):e.attachEvent?(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n]),s.add(e,t,n)):e["on"+t]=e["e"+t+n]}e=!0;var n,s={listEvents:n=[],add:function(e,t,s){n.push(arguments)},flush:function(){var e,t;for(e=n.length-1;e>=0;e-=1)(t=n[e])[0].removeEventListener&&t[0].removeEventListener(t[1],t[2],t[3]),"on"!==t[1].substring(0,2)&&(t[1]="on"+t[1]),t[0].detachEvent&&t[0].detachEvent(t[1],t[2])}};function o(e,t){return 0===e.indexOf(t)}function r(e,t){return e.substring(e.length-t.length)===t}function a(e,t){var n=!1;if(t&&t.constructor===Array)for(var s=0;s<t.length;s++)if(a(e,t[s]))return!0;return e===t&&(n=!0),n}function i(e){var t=!1;if("http://"===e.substring(0,7)||"https://"===e.substring(0,8)){for(var n=e.indexOf("://"),s=e.substring(n+3),r="",i=0;i<s.length;i++){var u=s.charAt(i);if("/"===u||":"===u||"#"===u)break;r+=u}t=a(location.hostname,r)}else"#"===e.charAt(0)?t=!1:o(e,"//")||"/"!==e.charAt(0)&&-1!==e.search(/^[a-zA-Z][a-zA-Z0-9.+-]*:/)||(t=!0);return t}function u(e){var t="",n=e.indexOf("://"),s="";s=n>0?e.substring(n+3):"/"!==e.charAt(0)?"%CONTEXT_PATH%/"+e:e;for(var o=-1===n,r=0;r<s.length;r++){var a=s.charAt(r);if("/"===a)o=!0;else if(!0===o&&("?"===a||"#"===a)){o=!1;break}!0===o&&(t+=a)}return t}function l(e,t){let n=null;return Object.keys(e).forEach((function(s){var a=e[s];t===s?n=a:o(s,"^")&&r(s,"$")?new RegExp(s).test(t)&&(n=a):o(s,"/*")?n=a:r(s,"/*")||o(s,".*")})),n}function c(e,t,n,s,o){if(!o){var r=e.getAttribute("method");if(null!=r&&"get"===r.toLowerCase())return}var a=n,c=e.getAttribute("action");if(null!==c&&i(c)){const o=l(s,u(c));a=null==o?n:o;let r=Object.keys(e.elements).filter((function(n){return e.elements[n].name===t}));if(0===r.length){var p=document.createElement("input");p.setAttribute("type","hidden"),p.setAttribute("name",t),p.setAttribute("value",a),e.appendChild(p)}else r.forEach((function(t){return e.elements[t].value=a}))}}function p(e,t,n,s,o){const r=function(e,t,n){let s;return s=-1===e.indexOf("?")?e+"?"+t+"="+n:e+"&"+t+"="+n,s},a=e.getAttribute&&e.getAttribute(t);if(null!=a&&i(a)&&!function(e){var t=!1,n="%UNPROTECTED_EXTENSIONS%";if(""!==n)for(var s=function(e){var t="";-1!==e.indexOf(";")&&(e=e.split(";")[0]);-1!==e.indexOf(".")&&(t=e.substring(e.lastIndexOf(".")+1,e.length)||e);return t}(u(e)).toLowerCase(),o=n.split(","),r=0;r<o.length;r++)if(o[r]===s){t=!0;break}return t}(a)){const i=l(o,u(a)),c=null==i?s:i,p=new RegExp("(?:"+n+"=)([^?|#|&]+)","gi").exec(a);if(null===p||0===p.length){let s;const o=a.indexOf("#");if(-1!==o){const e=a.split("#")[0],t=a.substring(o);s=r(e,n,c)+t}else s=r(a,n,c);try{e.setAttribute(t,s)}catch(e){}}else{let n=a;p.slice(1).forEach((function(e){return n=n.replace(e,c)})),e.setAttribute(t,n)}}}function d(e,t,n,s){var o=e.length;for(let r=0;r<o;r++){let a=e[r];a.tagName&&"form"===a.tagName.toLowerCase()?(c(a,t,n,s,"%INJECT_GET_FORMS%"),o=e.length,p(a,"action",t,n,s)):(p(a,"src",t,n,s),p(a,"href",t,n,s))}}function f(e,t,n){var s={};s=n,d(document.all?document.all:document.getElementsByTagName("*"),e,t,s)}var h="%DOMAIN_ORIGIN%".split(",");if(a(document.domain,h)){var g="%TOKEN_NAME%",y="%TOKEN_VALUE%",v={isDomContentLoaded:!1},b={pageTokens:{}};t(window,"unload",s.flush),t(window,"DOMContentLoaded",(function(){v.isDomContentLoaded=!0,b.pageTokensLoaded&&f(g,y,b.pageTokens)})),function(){const e="%DYNAMIC_NODE_CREATION_EVENT_NAME%";if(e)t(window,e,(function(e){d([e.detail],g,y,b.pageTokens)}));else if(MutationObserver){const e=new MutationObserver((function(e,t){for(let t in e){const n=e[t],s=n.addedNodes;"childList"===n.type&&s.length&&s.length>0&&d(s,g,y,b.pageTokens)}}));e.observe(document,{attributes:!1,childList:!0,subtree:!0}),t(window,"unload",e.disconnect)}else t(window,"DOMNodeInserted",(function(e){const t=e.target||e.srcElement;"DOMNodeInserted"===e.type&&d([t],g,y,b.pageTokens)}))}(),"Microsoft Internet Explorer"===navigator.appName?function(){var e=window.XMLHttpRequest;function t(){this.base=e?new e:new window.ActiveXObject("Microsoft.XMLHTTP")}function n(){return new t}n.prototype=t.prototype,n.UNSENT=0,n.OPENED=1,n.HEADERS_RECEIVED=2,n.LOADING=3,n.DONE=4,n.prototype.status=0,n.prototype.statusText="",n.prototype.readyState=n.UNSENT,n.prototype.responseText="",n.prototype.responseXML=null,n.prototype.onsend=null,n.url=null,n.onreadystatechange=null,n.prototype.open=function(e,t,n,s,o){var r=this;this.url=t,this.base.onreadystatechange=function(){try{r.status=r.base.status}catch(e){}try{r.statusText=r.base.statusText}catch(e){}try{r.readyState=r.base.readyState}catch(e){}try{r.responseText=r.base.responseText}catch(e){}try{r.responseXML=r.base.responseXML}catch(e){}null!==r.onreadystatechange&&r.onreadystatechange.apply(this,arguments)},this.base.open(e,t,n,s,o)},n.prototype.send=function(e){null!==this.onsend&&this.onsend.apply(this,arguments),this.base.send(e)},n.prototype.abort=function(){this.base.abort()},n.prototype.getAllResponseHeaders=function(){return this.base.getAllResponseHeaders()},n.prototype.getResponseHeader=function(e){return this.base.getResponseHeader(e)},n.prototype.setRequestHeader=function(e,t){return this.base.setRequestHeader(e,t)},window.XMLHttpRequest=n}():(XMLHttpRequest.prototype._open=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(e,t,n,s,o){this.url=t,this._open.apply(this,arguments)},XMLHttpRequest.prototype._send=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){null!==this.onsend&&this.onsend.apply(this,arguments),this._send.apply(this,arguments)}),XMLHttpRequest.prototype.onsend=function(e){t(this,"readystatechange",(function(){if(4===this.readyState){let e=this.getResponseHeader(g);if(null!=e)try{let t=JSON.parse(e),n=t.masterToken;void 0!==n&&(y=n);let s=t.pageTokens;void 0!==s&&Object.keys(s).forEach((function(e){return b.pageTokens[e]=s[e]})),f(g,y,b.pageTokens)}catch(e){}}}));if(i(this.url)){this.setRequestHeader("X-Requested-With","XMLHttpRequest");let e=function(e){var t=function(e,t){let n=e.indexOf(t);return n>0?e.substring(0,n):e};let n=o(e,"/")?e:"/"+e;return n=t(n,"?"),n=t(n,"#"),n}(this.url);if(null===b.pageTokens)this.setRequestHeader(g,y);else{let t=l(b.pageTokens,e);if(null==t){let t=function(e,t){let n=null,s=window.location.pathname.substring(1).split("/"),o="";for(let r=0;r<s.length-1;r++){o+="/"+s[r];let a=l(e,o+t);if(null!=a){n=a;break}}return n}(b.pageTokens,e);null===t?this.setRequestHeader(g,y):this.setRequestHeader(g,t)}else this.setRequestHeader(g,t)}}};!function(e,t,n){const s=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");s.open("POST","%SERVLET_PATH%","%ASYNC_XHR%"),void 0!==e&&void 0!==t&&s.setRequestHeader(e,t),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){let e=JSON.parse(s.responseText).pageTokens;n.call(this,e)}else alert(s.status+": CSRF check failed")},s.send(null)}(g,y,(function(e){b.pageTokens=e,b.pageTokensLoaded=!0,v.isDomContentLoaded&&f(g,y,e)}))}else alert("OWASP CSRFGuard JavaScript was included from within an unauthorized domain!")}()})();